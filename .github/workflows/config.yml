name: nodejs

on: [push]

jobs:
  testdocker:
    runs-on: ubuntu-latest
    container:
      image: ros:melodic
    steps:  
    
    - uses: actions/checkout@v2
    - name: install
      run: |
        sudo apt update
        sudo apt install -y python-catkin-pkg python-rosdep python-wstool
        
    - name: build
      run: |
        mkdir -p catkin_ws/src
        source /opt/ros/melodic/setup.bash
        cd catkin_ws/src && catkin_init_workspace
        cd ..
        ln -s ../../test_node src
        source /opt/ros/melodic/setup.bash && catkin_make

